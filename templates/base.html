<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Optimal Time Calculator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css')}}">
    {% block head %}{% endblock %}
</head>
<body>
    <h1>Recipe Optimal Time Calculator</h1>
    
    <div id="recipe-list">
        <h2>Available Recipes</h2>
        <ul>
            {% for recipe in recipes %}
            <li>
                <!-- loop.index0 = return index of 0,1,2,3... -->
                <!-- recipe.recipe = Cookie, Cake... recipe name  -->
                <a href="#" class="recipe-link" data-recipe-id="{{ loop.index0 }}">{{ recipe.recipe }}</a>
            </li>
            {% endfor %}
            <li>
                <a href="#" id="add-new-recipe" class="add-recipe-link">Add New Recipe</a>
            </li>
        </ul>
    </div>

    <!-- yeni tarif ekleme formu -->
    <div id="new-recipe-form" style="display: none;">
        <h2>Add New Recipe</h2>
        <label for="recipe-name">Recipe Name:</label>
        <input type="text" id="recipe-name" placeholder="Enter recipe name" class="recipe-name-input"><br><br>
        
        <div id="recipe-steps">
            <!-- template -->
            <div class="step-box" data-step-id="1">
                <label>Task:</label>
                <input type="text" name="task" placeholder="Enter task description"><br>
                <label>Time (in minutes):</label>
                <input type="number" name="time" min="0" placeholder="Enter time"><br>
                <label>Prerequisites (space-separated IDs):</label>
                <input type="text" name="prerequisites" placeholder="Enter prerequisite step IDs" disabled><br>
                <label>Occupies Chef:</label>
                <select name="occupies_chef">
                    <option value="false" selected>No</option>
                    <option value="true">Yes</option>
                </select><br><br>
                <button class="remove-step">Remove Step</button>
            </div>
        </div>
        <button id="add-step">Add New Step</button>
        <button id="create-recipe">Create the Recipe</button>
        <button id="use-template">Use Template</button>
    </div>

    
    <div id="result-container">
        <h2>Optimal Cooking Time</h2>
        <div id="time-container">
            <div id="normal-time-container">
                <p id="normal-time"></p>
                <ul id="normal-task-list"></ul> 


            </div>
            <div id="optimal-time-container">
                <p id="optimal-time"></p>
                <ul id="optimal-task-list"></ul> 


            </div>
        </div>
    </div>

    <script type="text/javascript">
        // flasktan gelen recipes listesini JavaScript'e aktarÄ±yoruz
        var recipes = JSON.parse('{{ recipes | tojson | safe }}');
    </script>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
    
    {% block body %}{% endblock %} 
</body>
</html>